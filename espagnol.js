    // ------------------------------------------------------------------
    // 1. D√âFINITION DES DONN√âES (Gardez le m√™me bloc dans les deux fichiers)
    // ------------------------------------------------------------------
    const videoData = {
        '1': {
            title: 'El Fot√≥n: ¬øPart√≠cula u Onda?',
            channelName: 'Henidos',
            subscribers: '1M',
            views: '1.9M',
            age: '7 days ago',
            description: `¬°Hola a todos! üëã En esta primera parte de nuestra serie de f√≠sica, vamos a descolgar el tel√©fono para hablar de los bloques de construcci√≥n m√°s peque√±os del universo: ¬°los fotones!

    ¬øSab√≠as que la luz se comporta de dos maneras a la vez? Exploramos la base de la f√≠sica cu√°ntica:
    ‚Ä¢ ¬øQu√© son las **part√≠culas** (electrones, protones)?
    ‚Ä¢ ¬øQu√© son las **ondas** mec√°nicas?
    ‚Ä¢ La **dualidad onda-part√≠cula** (el concepto clave para entenderlo todo).

    Descubre c√≥mo los fotones desaf√≠an nuestra l√≥gica. ¬°Es la introducci√≥n perfecta al mundo de lo muy peque√±o!

    ---
    üîó **¬°Mira la Parte 2 (El Experimento de la Doble Rendija) aqu√≠!**
    ---

    üé∂ *M√∫sica de fondo: SCIENCCLIC*

    **#F√≠sicaCu√°ntica #Fotones #Part√≠culas #Ondas #DualidadOndaPart√≠cula #Ciencia #Divulgaci√≥nCient√≠fica #Yann**`,
            videoSrc: 'espagnolH7.mp4',
            thumbnailSrc: 'espagnolH5.png',
            isPlaylist: false
        },
        '2': {
            title: '¬øPor Qu√© la Observaci√≥n lo Cambia Todo? (Doble Rendija)',
            channelName: 'DosMinutos',
            subscribers: '8M',
            views: '7M',
            age: '6 day ago',
            description: `¬°Hola a todos y bienvenidos a la Parte 2! üëã Soy Yann. En este v√≠deo, vamos a sumergirnos en el experimento m√°s famoso, fascinante y misterioso de la f√≠sica cu√°ntica: El Experimento de la Doble Rendija (Double Slit Experiment).

    Despu√©s de ver qu√© son las part√≠culas y las ondas en la Parte 1, hoy descubrimos por qu√© los electrones se comportan de forma totalmente il√≥gica cuando nadie los est√° mirando. ¬°Es la clave de la dualidad onda-part√≠cula!

    üöÄ En este v√≠deo aprender√°s:
    ‚Ä¢ ¬øQu√© es el experimento de la doble rendija?
    ‚Ä¢ ¬øPor qu√© los electrones act√∫an como ondas?
    ‚Ä¢ El misterioso efecto de la observaci√≥n en el mundo cu√°ntico.

    ---
    üîó *Mira la Parte 1 (Introducci√≥n a la Cu√°ntica) aqu√≠:*
    üé∂ *M√∫sica de fondo: [Nom de la musique ou "Scienclic"]*

    **#DobleRendija #F√≠sicaCu√°ntica #Ciencia #Divulgaci√≥nCient√≠fica #Mec√°nicaCu√°ntica #DualidadOndaPart√≠cula #Yann**`,
            videoSrc: 'https://lh3.googleusercontent.com/pw/AP1GczMn6z11YfJFYtSM5872jY5-d4Gt6fG-09rFAyQuoUoiG5Zq0UcEm3VH2YB7E-X7BuUzCzZFfHicFGEvvNil4Sn5hWF1BMphLnh5T8hME22lNetXK1evzEh4hZiQrF95CB9L8k-mQAr1q8bfHb1jZn5nKjP8GPSVuWuJyh2thR-NXi5AkbGKIQc5-RgiP_7WYDz-k1fNwTGbWBoo9WGbgWelc-yt_q-JzFsc6JNEU8ZRT2Bl0HLjIaZtMQQs1XboL0jKsf8-4zr7I4MF04KeM8B5bwk2n9hqYZeyNrnn8gem5ET2VhOmFpAplPIb-TfQDNP4s1gr6yLv5QsZeSQBM7ZuPaIb9SzJqRwLeUrgZfEmSjEvQHEvqeZ1xZwLnz-tXqKe3KMo9xZtel_7hb79EZx1UJmbEfNMeKP_agvgmGqLY2owngFet-CldjfERaDlVoGAi5_YilSXj741uXdw1W36crXlfkcffWejTA5Y1H_qc_stxnhCintuO90WDp4Aa66xj_7G2JyDZ82-DjuADZeWK46bJt649QsnnBRlOqQvFxwzwHIScJyvTQnyvFz95OxnTcubN1UmxRUAd7IulTmbgtoXScDn-8u0E5B89e9YQtIBlmh-WZMAwPJGCe6Cra6hx8lYAXF-9QrwECbywueeNETDOUkFmCr12r4zNN8gAF1ViV2xGEcU7LddhfF20MntRnEL1bHXihfn08DS5amP1OC4tQiCAww93NzM4ffd3sxkM_N1PmNwx2a2BJLG6k-umeHgZJiZDZbF1Z-UDzy--HItuaEvhkAtcXLcbCm3KBafM6cF04nyy_IFEF_cDx703oNhaOh6zfaBMlB4gkaMdg3aObkHDo-UYUuWY7I3_EhxQiNcRqOiBn3NVYtz0XuSlVP2HPWLjBRM_RrI3ixKheD3yNBuSM3uo68wCTlO_cODgIWeXoSM=m15?authuser=1&cpn=Ujk7w5sXv8y2FtWO&c=WEB_EMBEDDED_PLAYER&cver=1.20251104.14.00',
            thumbnailSrc: 'espagnol.png',
            isPlaylist: false
        },
        'playlist': {
            title: 'playlist avec les 2 vid√©o',
            channelName: 'Henidos & DosMinutos',
            subscribers: '1.9M',
            views: 'Updated today',
            description: 'Ceci est une playlist contenant les deux vid√©os.',
            thumbnailSrc: 'espagnol.png',
            isPlaylist: true,
            videos: [
                { id: '1', title: 'El Fot√≥n: ¬øPart√≠cula u Onda?', duration: '2:00', channel: 'Henidos' },
                { id: '2', title: '¬øPor Qu√© la Observaci√≥n lo Cambia Todo? (Doble Rendija)', duration: '2:00', channel: 'DosMinutos' }
            ]
        }
    };
    
    // ------------------------------------------------------------------
    // 2. LOGIQUE DU MENU BURGER (√Ä conserver)
    // ------------------------------------------------------------------
    const menuIcon = document.querySelector('.menu-icon');
    const sidebar = document.querySelector('.sidebar');
    const mainContent = document.querySelector('.content-area') || document.querySelector('.video-page-container');
    const filterBar = document.querySelector('.filter-bar');
    const leftHeader = document.querySelector('.left-header');
    let isExpanded = true; 

    function toggleSidebar() {
        const textElements = document.querySelectorAll('.nav-item span:not(.nav-item-icon), .nav-title');
        const subscriptionAvatars = document.querySelectorAll('.subscription-avatar');
        
        // ... (La logique du toggle est la m√™me) ...
        if (isExpanded) {
            const width = '0px';
            sidebar.style.width = width;
            sidebar.style.minWidth = width;
            if (mainContent) mainContent.style.marginLeft = width;
            if (filterBar) filterBar.style.left = width;
            if (leftHeader) leftHeader.style.minWidth = width;
            
            textElements.forEach(el => { el.style.display = 'none'; });
            subscriptionAvatars.forEach(el => { el.style.marginRight = '0'; });

            document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                item.style.padding = '10px 0';
                item.style.justifyContent = 'center';
            });
            
        } else {
            const width = '240px';
            sidebar.style.width = width;
            sidebar.style.minWidth = width;
            if (mainContent) mainContent.style.marginLeft = width;
            if (filterBar) filterBar.style.left = width;
            if (leftHeader) leftHeader.style.minWidth = width;

            textElements.forEach(el => { el.style.display = 'block'; });
            subscriptionAvatars.forEach(el => { el.style.marginRight = '20px'; });
            document.querySelectorAll('.sidebar .nav-item').forEach(item => {
                item.style.padding = '10px 24px';
                item.style.justifyContent = 'flex-start';
            });
        }
        isExpanded = !isExpanded;
    }

    if (menuIcon) {
        menuIcon.addEventListener('click', toggleSidebar);
    }
    
    // ------------------------------------------------------------------
    // 3. LOGIQUE DES SUGGESTIONS ET CHARGEMENT DE CONTENU (NOUVELLE LOGIQUE)
    // ------------------------------------------------------------------

    // Fonction utilitaire pour g√©n√©rer le HTML d'une carte de suggestion
    function createSuggestedCardHTML(id, title, channelName, views, age, thumbnailSrc, isPlaylist = false) { // <-- Ajout de thumbnailSrc
    const linkHref = isPlaylist ? `page_video.html?id=playlist&v=1` : `page_video.html?id=${id}`;
    const viewsLine = isPlaylist ? 'Updated today' : `${views} ‚Ä¢ ${age}`;

    // Le HTML pour l'image de la miniature
    const imageTag = `<img src="${thumbnailSrc}" alt="Thumbnail for ${title}" style="width: 100%; height: 100%; object-fit: cover;">`;

    // Pour la playlist, nous allons ajouter un indicateur "playlist"
    const playlistOverlay = isPlaylist ? `
        <div class="playlist-overlay">
            <svg viewBox="0 0 24 24" fill="#fff" width="20" height="20"><path d="M11 7H2v2h9V7zm0 4H2v2h9v-2zm7-6v12h-2V5h2zm-4 0v12h-2V5h2zM2 17h9v-2H2v2z"></path></svg>
            <span>${videoData['playlist'].videos.length}</span>
        </div>
    ` : '';

        return `
        <a href="${linkHref}" class="suggested-video-card suggested-video-link" data-video-id="${id}">
            <div class="thumbnail">
                ${imageTag}  
                ${playlistOverlay}
                <div class="duration-label">2:00</div>
            </div>
            <div class="suggested-video-meta">
                <h3>${title}</h3>
                <p>${channelName}</p>
                <p>${viewsLine}</p>
            </div>
        </a>
    `;
}

    // Fonction qui rend les suggestions dans la colonne lat√©rale (Exclut la vid√©o courante)
    function renderSuggestions(currentVideoId) {
        const suggestedVideosWrapper = document.querySelector('.suggested-videos-wrapper');
        if (!suggestedVideosWrapper) return;

        let suggestionsHTML = '';

        // 1. Ajouter la Playlist en tant que suggestion
    suggestionsHTML += createSuggestedCardHTML(
        'playlist',
        videoData['playlist'].title,
        videoData['playlist'].channelName, 
        '',
        '',
        videoData['playlist'].thumbnailSrc, // <--- Transmission de la miniature
        true 
    );

    // 2. Ajouter les autres vid√©os pertinentes
    for (const id in videoData) {
        const video = videoData[id];
        if (id !== currentVideoId && id !== 'playlist' && !video.isPlaylist) {
            if (videoData[id]) { 
                suggestionsHTML += createSuggestedCardHTML(
                    id,
                    video.title,
                    video.channelName,
                    video.views,
                    video.uploadTime,
                    video.thumbnailSrc, // <--- Transmission de la miniature
                    false
                );
            }
        }

        suggestedVideosWrapper.innerHTML = suggestionsHTML;
    }
}

    // Fonction principale de chargement
    function loadVideoContent(contentId, videoInPlaylistId = null) {
        const playlistContainer = document.querySelector('.playlist-container');
        const suggestedVideosWrapper = document.querySelector('.suggested-videos-wrapper');
        const contentData = videoData[contentId] || videoData['1'];
        
        let videoDataToDisplay = contentData;
        let videoIdForSuggestions = contentId; // ID utilis√© pour le filtrage

        // 1. Logique sp√©cifique √† la Playlist
        if (contentData.isPlaylist) {
            playlistContainer.style.display = 'block';
            if (suggestedVideosWrapper) suggestedVideosWrapper.style.display = 'block';

            const currentVideo = contentData.videos.find(v => v.id === videoInPlaylistId) || contentData.videos[0];
            videoDataToDisplay = videoData[currentVideo.id]; 
            videoIdForSuggestions = currentVideo.id;
            
            // Remplir le conteneur de playlist sur le c√¥t√©
            let playlistHTML = `
                <div class="playlist-header" style="background-color: #3f3f3f; padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                    <h3 style="font-size: 16px;">${contentData.title}</h3>
                    <p style="font-size: 14px; color: #aaa;">${contentData.channelName}</p>
                </div>
                <div class="playlist-videos">
            `;
            
            contentData.videos.forEach((video, index) => {
                const isActive = video.id === currentVideo.id;
                const activeBg = isActive ? '#4a4a4a' : 'transparent';
                const activeColor = isActive ? 'white' : 'var(--text-primary)';
                
                // Determine thumbnail: prefer the playlist item thumbnail, otherwise fallback to the main videoData entry, then the playlist thumbnail, then a placeholder.
                const thumbSrc = video.thumbnailSrc || (videoData[video.id] && videoData[video.id].thumbnailSrc) || contentData.thumbnailSrc || 'placeholder.png';

                playlistHTML += `
                    <a href="page_video.html?id=playlist&v=${video.id}" class="playlist-item" 
                       style="display: flex; padding: 8px; margin-bottom: 4px; border-radius: 4px; text-decoration: none; color: ${activeColor}; background-color: ${activeBg}; transition: background-color 0.2s;">
                        <div style="min-width: 40px; text-align: center; color: ${isActive ? 'var(--red-youtube)' : '#aaa'};">${isActive ? '<svg width="14" height="14" viewBox="0 0 24 24" fill="#8d8d8d"> <path d="M5 4.623V19.38a1.5 1.5 0 002.26 1.29L22 12 7.26 3.33A1.5 1.5 0 005 4.623Z"></path> </svg>' : index + 1}</div>
                        <div style="margin-right: 8px; min-width: 100px; height: 56px; background-image: url('${thumbSrc}'); border-radius: 4px; background-size:cover;"></div>
                        <div>
                            <p style="font-size: 14px; margin: 0;">${video.title}</p>
                            <p style="font-size: 12px; color: #aaa;">${video.channel} | ${video.duration}</p>
                        </div>
                    </a>
                `;
            });
            
            playlistHTML += `</div>`;
            playlistContainer.innerHTML = playlistHTML;

            renderSuggestions(videoIdForSuggestions);


        } else {
            // 2. Logique pour une vid√©o normale
            playlistContainer.style.display = 'none';
            if (suggestedVideosWrapper) suggestedVideosWrapper.style.display = 'block';
            
            // Rendre les suggestions bas√©es sur l'ID de la vid√©o principale
            renderSuggestions(videoIdForSuggestions);
        }

        // 3. Mise √† jour des √©l√©ments HTML du lecteur (LA SOLUTION DYNAMIQUE !)
        const videoElement = document.getElementById('main-video-player');
        const playerPlaceholder = document.querySelector('.player-placeholder');

        if (videoElement && videoDataToDisplay.videoSrc) {
            // Si la balise video est pr√©sente et a une source
            videoElement.src = videoDataToDisplay.videoSrc;
            videoElement.load(); // N√©cessaire pour charger la nouvelle source
            videoElement.play(); // D√©marrer la lecture automatiquement
            videoElement.style.display = 'block'; // Afficher la vid√©o
            if(playerPlaceholder) playerPlaceholder.style.display = 'none'; // Masquer le placeholder
        } else if (playerPlaceholder) {
            // Si pas de balise video ou pas de source, on affiche le placeholder
            if(videoElement) videoElement.style.display = 'none';
            playerPlaceholder.style.display = 'flex';
            playerPlaceholder.textContent = `LECTEUR VID√âO : ${videoDataToDisplay.title}`;
        }

        // 4. Mise √† jour des √©l√©ments HTML du lecteur
        document.title = videoDataToDisplay.title + " - YouTube Clone";
        document.querySelector('.video-info h1').textContent = videoDataToDisplay.title;
        document.querySelector('.player-placeholder').textContent = `LECTEUR VID√âO : ${videoDataToDisplay.title}`;
        document.querySelector('.description-box .views-date').innerHTML = 
            `${videoDataToDisplay.views} <span class="dot-separator">‚Ä¢</span> ${videoDataToDisplay.age}`;
        document.querySelector('.description-box p:not(.views-date)').textContent = videoDataToDisplay.description;
        document.querySelector('.channel-name h3').innerHTML = `${videoDataToDisplay.channelName} <span style="color: #8d8d8d;"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1Zm5.707 7.293a1 1 0 010 1.414L10 17.414l-3.707-3.707a1 1 0 111.414-1.414L10 14.586l6.293-6.293a1 1 0 011.414 0Z"></path>
                                                </svg></span>`;
        
    } 

    // ------------------------------------------------------------------
    // 4. EX√âCUTION & GESTION DES BOUTONS/LIENS
    // ------------------------------------------------------------------


        // Handle filter chips selection
        document.addEventListener('DOMContentLoaded', () => {
            const filterChips = document.querySelectorAll('.filter-chip');
            console.log(filterChips)
            filterChips.forEach(chip => {
                chip.addEventListener('click', () => {
                // Remove active class from all chips
                filterChips.forEach(c => c.classList.remove('active'));
                // Add active class to clicked chip
                chip.classList.add('active');
                });
            });
        });

    if (document.title.includes('Titre de la Vid√©o')) {
        const urlParams = new URLSearchParams(window.location.search);
        const contentId = urlParams.get('id') || '1'; 
        const videoInPlaylistId = urlParams.get('v');
        
        loadVideoContent(contentId, videoInPlaylistId);
        
        // --- Boutons S'abonner ---
        const subscribeBtn = document.querySelector('.subscribe-btn');
        if (subscribeBtn) {
            subscribeBtn.addEventListener('click', () => {
                const isSubscribed = subscribeBtn.textContent === "SUBSCRIBED";
                if (isSubscribed) {
                    subscribeBtn.textContent = "S'ABONNER";
                    subscribeBtn.style.backgroundColor = '#f1f1f1';
                } else {
                    subscribeBtn.textContent = "SUBSCRIBED";
                    subscribeBtn.style.backgroundColor = 'rgba(255,255,255,0.1)';
                }
            });
        }
        
        // --- Boutons Like/Dislike (Logique simplifi√©e) ---
        const actionBtn = document.querySelector('.action-btn:first-of-type'); 
        if (actionBtn) {
            let initialLikes = 220; 
            actionBtn.addEventListener('click', () => {
                const isLiked = actionBtn.classList.toggle('liked');
                actionBtn.querySelector('span').textContent = isLiked ? `${initialLikes + 0}K` : `${initialLikes}K`;
                actionBtn.style.backgroundColor = isLiked ? '#3ea6ff' : 'var(--bg-secondary)';
            });
        }

        // --- Gestion des liens pour charger le contenu SANS recharger la page ---
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a[href^="page_video.html"]');
            if (link) {
                e.preventDefault();
                
                const newUrl = new URL(link.href);
                const newContentId = newUrl.searchParams.get('id');
                const newVideoId = newUrl.searchParams.get('v');
                
                window.history.pushState({}, '', link.href);
                
                loadVideoContent(newContentId, newVideoId);
            }
        });
    }

    // Si on est sur la page d'accueil, les liens sont g√©r√©s par le HTML standard.
    if (document.title.includes('Accueil')) {
        // Aucune logique complexe n√©cessaire, les liens HTML du type <a href="page_video.html?id=1"> suffisent.
    }
